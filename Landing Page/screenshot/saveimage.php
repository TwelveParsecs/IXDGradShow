<?php

if (isset($_POST["savedFrame"])) {

    $img = $_POST['savedFrame'];

    // $savedFrame = "data:image/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgCAYAAAA10dzkAAAgAElEQVR4Xu3dXYjd9ZnA8WfGnAYcKU5Mb6KbvdgJpC83FsQbYS9imlijSwytF2VLsAYXvei+4KqtjWhSrCAsChuWSKoiCNmEyGo0UYnSUtiK23YvihHi7lZjtKx50xiJE3POMild2kU3M3Oek3nO/D7CXnXOM8//8/wvviQ7k5Fer9eLov/dc889cd99990TEfcVXdFaBAgQIECAAIGhExipHIB33nlnPPDAA3dGxANDJ2thAgQIECBAgEBRgdIBeMstt5zaunXr30XElqJ+1iJAgAABAgQIDJ1A6QC8/vrrTzzzzDMbImL70MlamAABAgQIECBQVKB0AH71q199/1e/+tVfRMRPivpZiwABAgQIECAwdAKlA/ALX/jCycOHD38lIn4zdLIWJkCAAAECBAgUFSgbgCdPnozx8fFPTp8+3SlqZy0CBAgQIECAwFAKlA3AV155Ja699tr/OHLkyMRQylqaAAECBAgQIFBUoGwAbtmyJe6+++4njx079q2idtYiQIAAAQIECAylQNkA/MY3vnFi586dfxMR24ZS1tIECBAgQIAAgaICZQPwkksuOXn06NHLI+JAUTtrESBAgAABAgSGUqBkAL766qvxta997e3jx4//yVCqWpoAAQIECBAgUFigZAD+4Ac/6D744IMPnTp16m8L21mNAAECBAgQIDCUAiUDcOnSpR8cPHhwVUT8fChVLU2AAAECBAgQKCxQLgD37dsX3/zmN//z6NGjf1bYzWoECBAgQIAAgaEVKBeA69at+2DXrl0bI+KhoVW1OAECBAgQIECgsECpAHzjjTfiy1/+8qnJyclLIuKjwm5WI0CAAAECBAgMrUCpAPzOd75z7Mc//vE/RcT3hlbU4gQIECBAgACB4gJlAvDAgQPxxS9+8fSZM2cujYj3irtZjwABAgQIECAwtAJlAvDrX//6m3v27Hk0Iu4dWk2LEyBAgAABAgSGQKBEAL744ouxZs2atycnJ/80IrpD4GZFAgQIECBAgMDQCpQIwEsvvfTQO++88/cR8eTQSlqcAAECBAgQIDAkAnMegLfccst/bd269V8j4ltDYmZNAgQIECBAgMBQC8xpAO7evTtuuOGG/z59+vRX/ODHUL9HlidAgAABAgSGSGDOAvCtt96a+qnf9z/66KO/jIhnhsjMqgQIECBAgACBoRaYswD80pe+dGj//v3/GBH3D7Wg5QkQIECAAAECQyYwJwF4zTXX/Hbv3r3/EhF/NWRe1iVAgAABAgQIDL3AeQ/Ab3/72x889dRTP/3www+vG3o9D0CAAAECBAgQGEKB8xqAU/G3Z8+efz98+PCfD6GVlQkQIECAAAEC80LgvAXg1F/7/uxnP/s3f/I3L94bD0GAAAECBAgMscDAA3Dqp31Xr1499QMfu/3//A3xm2J1AgQIECBAYN4IDDQAp37P34033jj1q14e8NO+8+ad8SAECBAgQIDAkAsMLACn/oWPRx99dOz06dM3+z1/Q/6WWJ8AAQIECBCYVwLpAfjiiy/G+vXrp/5t359ExF/7Fz7m1fviYQgQIECAAIF5IJAWgAcOHIjvfve7b+7bt++CycnJOyLiyXng4xEIECBAgAABAvNOoO8AfOONN+L+++8/9vjjj1905syZH0bEpojozjspD0SAAAECBAgQmCcCsw7Affv2xZYtWz7YvXv35yYnJ/8hIqb+77154uIxCBAgQIAAAQLzVmBGAfjqq6/G008/3X388cc/PHny5OGjR48+HBGPRMRH81bIgxEgQIAAAQIE5pnAZwbgyZMn49e//nX84he/iJdffvnESy+9NNrtdo+dOnVqx6lTp/45In4+zyw8DgECBAgQIECgCYGRjRs39j7++OM4duzYqXfffff022+/3T148OCC999/f+HnP//5N7vd7ivHjh17KSJ+GhEHmlDxkAQIECBAgACBeSwwEhEbI+LjiDgREUci4rcR8WZE/GYeP7dHI0CAAAECBAg0KzAVgP4jQIAAAQIECBBoSEAANnRsj0qAAAECBAgQmBIQgN4DAgQIECBAgEBjAgKwsYN7XAIECBAgQICAAPQOECBAgAABAgQaExCAjR3c4xIgQIAAAQIEBKB3gAABAgQIECDQmIAAbOzgHpcAAQIECBAgIAC9AwQIECBAgACBxgQEYGMH97gECBAgQIAAAQHoHSBAgAABAgQINCYgABs7uMclQIAAAQIECAhA7wABAgQIECBAoDEBAdjYwT0uAQIECBAgQEAAegcIECBAgAABAo0JCMDGDu5xCRAgQIAAAQIC0DtAgAABAgQIEGhMQAA2dnCPS4AAAQIECBAQgN4BAgQIECBAgEBjAgKw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8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5iNy47IAAANTSURBVHqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFdAAOZ6mkaAAAECBAgQKC8gAMufyIIECBAgQIAAgVwBAZjraRoBAgQIECBAoLyAACx/IgsSIECAAAECBHIFBGCup2kECBAgQIAAgfICArD8iSxIgAABAgQIEMgVEIC5nqYRIECAAAECBMoLCMDyJ7IgAQIECBAgQCBXQADmeppGgAABAgQIECgvIADLn8iCBAgQIECAAIFcAQGY62kaAQIECBAgQKC8gAAsfyILEiBAgAABAgRyBQRgrqdpBAgQIECAAIHyAgKw/IksSIAAAQIECBDIFRCAuZ6mESBAgAABAgTKCwjA8ieyIAECBAgQIEAgV0AA5nqaRoAAAQIECBAoLyAAy5/IggQIECBAgACBXAEBmOtpGgECBAgQIECgvIAALH8iCxIgQIAAAQIEcgUEYK6naQQIECBAgACB8gICsPyJLEiAAAECBAgQyBUQgLmephEgQIAAAQIEygsIwPInsiABAgQIECBAIFfgfwDsdhK4rRTJ2gAAAABJRU5ErkJggg==";

    // echo 'Yes, it works!';

} else {
    echo 'Error: Image not saved.';
}

$filteredData = explode(',', $img);
$img = str_replace(' ', '+', $img);
$unencoded = base64_decode($filteredData[1]);

echo "php server image data " . $img;

// WORKING: converts image data to image and saves
// $data = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
//        . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
//        . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
//        . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';

// $data = base64_decode($data);
// $im = imagecreatefromstring( $data );
// if ($im !== false) {
//     header('Content-Type: image/png');
//     imagepng($im, "img.png");
//     imagedestroy($im);
// }
// else {
//     echo 'An error occurred.';
// }

////////////////////////////////////////////////////////////////
// Create the image 
$fp = fopen('test1.png', 'w');
fwrite($fp, $unencoded);
fclose($fp); 

////////////////////////////////////////////////////////////////
// reading image to work with it
// $file_name = 'test1.png';
// $file_size = strlen($filteredData[1])/1024; 

// $fh = fopen('sigs/test1.png', 'r');
// $content = fread($fh, $file_size);
// $content = base64_encode($content);
// fclose($fh); 

?>